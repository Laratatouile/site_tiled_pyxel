<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>exemple de code</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./files/prism.css">
    <link rel="stylesheet" href="./files/style.css">
    <link rel="shortcut icon" href="./images/icone.ico" type="image/x-icon">
</head>
<body class="line-numbers">
    <div class="bande_gauche">
        <p>navigation rapide</p>
    </div>
    <div id="panneau_droite" class="navigation_rapide">
        <p class="sommaire_titre">Sommaire :</p>
        <div class="sommaire">
            <!-- Le sommaire -->
            <!-- partie 1 -->
            <div class="sommaire_partie_titre">
                <p>
                    <a href="#I">I) code</a>
                    <img id="ouv_img_1" onclick="rap_ouv(1)" src="./images/fleche.png" alt=">">
                </p>
            </div>
            <div id="sommaire_1" class="sommaire_partie">
                <p><a href="#I_1">1) code d'un fichier</a></p>
            </div>
        </div>
    </div>
    <div id="la_page" class="la_page_sans_la_barre">
        <!-- La bande en haut -->
        <div id="top" class="bande_haut">
            <div class="titre">exemples de code d'utilisation de tiled avec pyxel</div>
            <div onclick="bg_color()" class="bouton_bg">
                <img src="./images/soleil.png" alt="Thème">
            </div>
        </div>
        <!-- La totalité de la page -->
        <div class="conteneur">
            <!-- Les parties -->

            <!-- partie 1 -->
            <h1 id="I">I) code</h1>
            <div class="partie">
                <div id="I_1" class="sous_partie">
                    <div class="partie_titre">
                        <p>
                            1) code d'un fichier
                        </p>
                    </div>
                    <div class="partie_texte">
                        <p>
                           - C'est le code que l'on peut copier coller dans un fichier pour afficher avec pyxel
                            <pre>
                                <code class="language-python">
                                    import pyxel

                                    def draw_carte(data_carte:dict, image_path:str) -> None:
                                        """ Affiche la carte à l'écran en utilisant les données de Tiled et Pyxel """
                                        for i in range(len(data_carte["layers"])):
                                            # calcul des differentes variables pour l'affichage
                                            layer = data_carte["layers"][i]
                                            width, height = layer["width"], layer["height"]
                                            tile_width, tile_height = data_carte[0]["tilewidth"], data_carte[0]["tileheight"]

                                            decalage_x = (data_carte["layers"][i]["offsetx"] if "offsetx" in data_carte["layers"][i].keys() else 0)
                                            decalage_y = (data_carte["layers"][i]["offsety"] if "offsety" in data_carte["layers"][i].keys() else 0)
                                            
                                            pyxel.images[0].load(0, 0, image_path)


                                            # affichage des tuiles une par une
                                            for y in range(height):
                                                for x in range(width):
                                                    tuile = layer["data"][y * width + x]
                                                    if tuile == 0:
                                                        continue
                                                    tuile -= 1

                                                    u = tuile % 5 * tile_width
                                                    v = tuile // 5 * tile_height

                                                    pyxel.blt(
                                                        x * tile_width + decalage_x,
                                                        y * tile_height + decalage_y,
                                                        (0 if tuile < 25 else 1),
                                                        u,
                                                        (v if tuile < 25 else v-250),
                                                        tile_width,
                                                        tile_height
                                                        )

                                        return None


                                    def draw_object(path_image:str, id_image:int, x:int, y:int) -> None:
                                        pyxel.images[2].load(0, 0, path_image)
                                        pyxel.blt(x, y, 2, (id_image % 5)*50, (id_image // 5)*50, 50, 50, colkey=14)
                                        return None

                                </code>
                            </pre>
                            - Ce fichier est tout prêt a l'emploi
                        </p>
                    </div>
                </div>
            </div>
            <br><br><br><br>
            <!-- La barre du bas -->
            <div class="bande_bas">
                <div class="titre_bas">
                    titre en bas
                </div>
                <div class="maxime">
                    Maxime GEOFFROY
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script type="text/Javascript" src="./files/prism.js"></script>
    <script type="text/Javascript" src="./files/script.js"></script>
</body>
</html>